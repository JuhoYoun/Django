Django를 배포할 수 있는 두가지 방법

배포는 내가 만든 웹사이트를 인터넷에 올려 모든 사람이 볼 수 있게 하는것이다 크게 두가지 방법이 있다

여기서 잠깐 서버도 결국 실재로 존재하는 컴퓨터이다 서버는 잘 꺼지지 않고 안정성이 높은 컴퓨터이다 이렇게 서버로 사용할 컴퓨터를 일반 사람들이 구축하고 관리하기 어려우니
업체가 서버를 제공하고 일반인들은 해당 서버를 네트워크르 이용해서 사용한다 이러한 것을 우리는 클라우드 서비스라고 말한다 그 중에서 서버를 위한 클라우드 서비스는 크게 두 종류가 있는데
IaaS와 PaaS 라고 한다

이 두 서비스의 차이점은 개발자가 서비스의 어디까지 설정해서 사용할 수 있는가이다 

IaaS (Infrastructure as a Service)

먼저 IaaS는 서버 장비만 빌려서 사용하는 방식이다 업체에서는 장비에 개발자가 선택한 운영체재만 설치해서 네트워크로 제공해주고 개발자는 제공받은 클라우드 서버에 필요한 모든 프로그램을 직접 설치하고
설정해서 사용해야 한다 보다 많은 부분을 직접 해줘야해서 구축하는 과정이 조금 까다롭지만 필요한 최적의 환경 구축이 가능하다 대표적인 서비스로는 아마존의 AWS EC2

PaaS (Platform as a Service)

PaaS는 서버 장비와 운영체재 그리고 개발자가 선택한 각종 실행 환경과 개발 설정 까지 모두 갖춰져있는 서버를 빌려 사용하는 방식으로 개발자가 서버 구축보다 개발에 더 집중할 수 있다
대표적인 서비스로는 아마존의 AWS Elastic Beanstalk, Google App Engine, HEROKU 등이 있다

우리는 여기서 PaaS를 이용해 배포하는 방법을 배워볼것이다 여러 PaaS 중에서도 파이썬 애플리케이션 배포에 특화된 서비스인 pythonanywhere을 사용해보자 (파이썬 앱에 특화됨)
그리고 장고가 많이 익숙해진 뒤 별도의 토픽으로 IaaS를 이용해 필요한 것들을 하나하나 설정한 다음 배포하는 심화 과정도 배워보도록 하자

-------------------------------------------------------------------------------------------------------------------------------

웹사이트에 배포가 개발만큼 까다롭다는 말이 있다 그만큼 여러가지 작업이 필요한데 이번에는 배포하기 전에 Django프로젝트에서 준바해야할 세가지 사항에 대해 배워보자

VSCode 를 실행하고 제일 먼저 debug 모드를 끄자 

디버그 모드가 하는 중요한 기능 중 하나는 에러가 났을 때 자세한 에러 페이지를 표시하는 것인데 예를 들어 서버를 켜고 잠깐 에러를 내기 위해서 우리 프로젝트의 index 템플릿의 이름을 임의로 바꿔보면
개발서버에서 새로 고침을 해봤을 때 많은 정보를 가지고 있는 에러페이지가 나온다 장고의 버전이 무엇인지 파이썬 버전이 무엇인지 그리고 우리 웹사이트가 어떤 디렉토리 구조를 가지는지 구성 옵션이 어떻게 되는지 등등 정보가 나온다
이러한 정보들은 혹시나 우리 사이트를 공격하려는 많은 정보를 제공하고 웹사이트의 민감한 정보가 유출된 우려가 있다 장고에서 자체적으로 보안에 관련된 단어가 있으면 걸러주긴 하지만 배포시에는 꼭 디버그 모드를 끄도록 하자

* 장고에서 자체적으로 제외해주는 단어
API KEY PASS SECRET SIGNATURE TOKEN

장고 공식문서에도 디버그 모드가 켜 있는 상태로 배포하지 말라그런다

자 이제 바로 꺼주도록 하자 프로젝트 앱을 가서 settings.py 로 간다 그리고 내려가서 DEBUG를 True에서 False 로 바꿔준다

디버그 모드를 껐으면 두번째로 해야될 일은 ALLOWED_HOSTS를 설정해줘야한다 이름 그대로 우리가 허용한 호스트를 적어주는것이다
호스트란 간단히 말해서 우리의 장고 프로젝트를 제공하는 컴퓨터인데 배포할 때 사용할 주소를 이곳에 적어서 해당 서버가 우리 웹사이트를 서비스할 수 있게 하는 것이다
지금처럼 이렇게 아무것도 안적혀 있으면 로컬 호스트 즉 우리 컴퓨터에서만 접속할 수 있는 환경이 된다
따라서 적어주자 우리는 pythonanwhere 을 사용할거니까 문자열로 '.pythonanywhere.com'을 입력한다 -> 맨 앞에 .을 꼭 입력해야한다 이유는 나중에 배포하려는 사람들 각각의 
id.pythonanywhere.com으로 접속하기 때문이다

마지막 세번째로 할 일은 정적파일을 한곳에 모아주는 것이다 배포서버에서는 웹사이트에 필요한 모든 정적 파일을 하나의 위치에서 찾게되기 때문이다
샌드위치 구조가 기억나나? 배포시 하나로 모을 때 파일 이름이 중복되지 않게하기 위함이다 자 이제 정적파일들을 한곳에 모아보자 settings.py 맨 아래쪽을 보면 STATIC_URL 이라는것이 있다
